# app.py
import streamlit as st
import plotly.graph_objects as go
import numpy as np

st.set_page_config(page_title="ìœ ë¦¬í•¨ìˆ˜ ì°½ì˜ìœµí•© ì•±", layout="wide")

# ì„¸ì…˜ ìƒíƒœ ì´ˆê¸°í™”
if "page" not in st.session_state:
    st.session_state.page = "main"

# ì½˜í…ì¸  ì •ì˜
content = {
    "ê³¼í•™": {
        "emoji": "ğŸ§ª",
        "title": "ê³¼í•™ - ë¹›ì˜ êµ´ì ˆë¥ ",
        "desc": "ë¹›ì˜ êµ´ì ˆë¥ ê³¼ ìœ ë¦¬í•¨ìˆ˜ ê´€ê³„",
        "explanation": """**ê°œë…:**  
ë¹›ì€ ë§¤ì§ˆì´ ë°”ë€Œë©´ ì†ë„ê°€ ë‹¬ë¼ì ¸ ê²½ë¡œê°€ êº¾ì…ë‹ˆë‹¤.  
êµ´ì ˆë¥  n = ì§„ê³µì—ì„œ ë¹› ì†ë„ / ë§¤ì§ˆ ì† ì†ë„  
ì…ì‚¬ê°ê³¼ êµ´ì ˆê° ë³€í™”ëŠ” ìœ ë¦¬í•¨ìˆ˜ í˜•íƒœë¡œ ê·¼ì‚¬ ê°€ëŠ¥.  

**í™œìš©:**  
ê´‘í•™ ì¥ì¹˜ì—ì„œ ë¹› ê²½ë¡œ ì„¤ê³„ ì‹œ ê° ë³€í™” ì˜ˆì¸¡ â†’ ì„¤ê³„ ìµœì í™”"""
    },
    "ì½”ë”©": {
        "emoji": "ğŸ’»",
        "title": "ì½”ë”© - UI ìµœì í™”",
        "desc": "UI ë°˜ì‘ ì†ë„ ê³¡ì„  ìµœì í™”",
        "explanation": """**ê°œë…:**  
í™”ë©´ ì…ë ¥/ì¡°ì‘ì— ë”°ë¥¸ ë°˜ì‘ ì†ë„ë¥¼ ì„¤ê³„.  
ì„ í˜• ë³€í™”ëŠ” ë¶€ë“œëŸ½ì§€ ì•Šì•„ ì‚¬ìš©ì ê²½í—˜ ì €í•˜.  

**ìœ ë¦¬í•¨ìˆ˜ í™œìš©:**  
y = a / (x + b) + c  
- a: ì´ˆê¸° ë³€í™” í­  
- b: xì¶• ì´ë™/ì§€ì—°  
- c: ìµœì¢… yê°’ ì˜¤í”„ì…‹  
â†’ ìŠ¬ë¼ì´ë” ì¡°ì ˆë¡œ ë°˜ì‘ ê³¡ì„  ì‹¤í—˜ ê°€ëŠ¥"""
    },
    "ì˜ˆìˆ ": {
        "emoji": "ğŸ¨",
        "title": "ì˜ˆìˆ  - ê±´ì¶• ë””ìì¸ ê³¡ì„ ",
        "desc": "ìœ ë¦¬í•¨ìˆ˜ ê¸°ë°˜ ê±´ì¶• ê³¡ì„  ë””ìì¸",
        "explanation": """**ê°œë…:**  
ê³¡ì„  êµ¬ì¡°ë¡œ ì‹œê°ì  ì•ˆì •ê°ê³¼ ê³µê°„ê° í–¥ìƒ, ì§ì„ ë³´ë‹¤ ìì—°ìŠ¤ëŸ¬ìš´ ê³¡ì„  ì„ í˜¸.  

**ìœ ë¦¬í•¨ìˆ˜ ì‚¬ë¡€:**  
- ë£¨ë¸Œë¥´ í”¼ë¼ë¯¸ë“œ ë‚´ë¶€ í†µë¡œ: ì ê·¼ì„ ì„ ê¸°ì¤€ìœ¼ë¡œ ê³¡ì„  ë²½ ì„¤ê³„ â†’ ì•ˆì •ê°  
- ëŸ°ë˜ ë°€ë ˆë‹ˆì—„ ë” ë‚´ë¶€ íšŒë‘: ì ‘ê·¼í•˜ë©´ì„œ ì¢ì•„ì§€ëŠ” ê³¡ì„  â†’ ìœ ë¦¬í•¨ìˆ˜ ê·¼ì‚¬  
â†’ ì ê·¼ì„  ê¸°ì¤€ìœ¼ë¡œ ê³¡ì„  ì„¤ê³„ â†’ ë””ìì¸ ë¯¸ì  ê°€ì¹˜ + ì´ë™ ë™ì„  ìµœì í™”"""
    },
    "ì‚¬íšŒ": {
        "emoji": "ğŸ“ˆ",
        "title": "ì‚¬íšŒ - í•œê³„íš¨ìš©ì²´ê°",
        "desc": "í•œê³„íš¨ìš© ê·¸ë˜í”„ì™€ ìœ ë¦¬í•¨ìˆ˜",
        "explanation": """**ê°œë…:**  
ì†Œë¹„ëŸ‰ ì¦ê°€ â†’ ë§Œì¡± ì¦ê°€í­ ê°ì†Œ (í•œê³„íš¨ìš© ì²´ê°).  

**ìœ ë¦¬í•¨ìˆ˜ í™œìš©:**  
y = a / (x + b) + c  
- ì´ˆê¸° ë§Œì¡± í¬ê³ , ì´í›„ ì¦ê°€í­ ê°ì†Œ  
â†’ ê²½ì œ ëª¨ë¸ì—ì„œ ì†Œë¹„Â·ê°€ê²©Â·ìˆ˜ìš” ë¶„ì„ í™œìš©"""
    }
}

# ë©”ì¸ í˜ì´ì§€
def main_page():
    st.title("ìœ ë¦¬í•¨ìˆ˜ ì°½ì˜ìœµí•© ì•±")
    st.write("ì•„ë˜ ì¹´ë“œ ì¤‘ í•˜ë‚˜ë¥¼ ì„ íƒí•˜ì„¸ìš”:")
    
    cols = st.columns(2)
    items = list(content.keys())
    for i, key in enumerate(items):
        with cols[i % 2]:
            if st.button(f"{content[key]['emoji']} {content[key]['title']}"):
                st.session_state.page = key

# ë¶„ì•¼ í˜ì´ì§€
def detail_page(key):
    # ë§¨ ìœ„ì— ë’¤ë¡œê°€ê¸°
    if st.button("â¬…ï¸ ë©”ì¸ìœ¼ë¡œ ëŒì•„ê°€ê¸°"):
        st.session_state.page = "main"
    
    st.header(f"{content[key]['emoji']} {content[key]['title']}")
    st.write(content[key]['explanation'])
    st.write("---")
    
    st.subheader("ìœ ë¦¬í•¨ìˆ˜ ê·¸ë˜í”„ ì‹œë®¬ë ˆì´ì…˜")
    st.write("ìŠ¬ë¼ì´ë”ë¡œ a, b, c ê°’ì„ ë°”ê¾¸ì–´ ê·¸ë˜í”„ í˜•íƒœë¥¼ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.")
    st.write("y = a / (x + b) + c\n- a: ì´ˆê¸° ê°’ í¬ê¸°\n- b: xì¶• ì´ë™/ì ê·¼ì„  ìœ„ì¹˜\n- c: yì¶• ì˜¤í”„ì…‹")
    
    # ìŠ¬ë¼ì´ë”
    a = st.slider("a ê°’", 0.1, 10.0, 1.0)
    b = st.slider("b ê°’", 0.1, 10.0, 1.0)
    c = st.slider("c ê°’", -5.0, 5.0, 0.0)
    
    # x, y ê³„ì‚°
    x = np.linspace(0.1, 10, 500)
    y = a / (x + b) + c
    
    # Plotly ê·¸ë˜í”„
    fig = go.Figure()
    fig.add_trace(go.Scatter(x=x, y=y, mode='lines', name='ìœ ë¦¬í•¨ìˆ˜'))
    fig.update_layout(title="y = a / (x + b) + c",
                      xaxis_title="x",
                      yaxis_title="y",
                      height=500)
    st.plotly_chart(fig, use_container_width=True)

# í˜ì´ì§€ ì´ë™
if st.session_state.page == "main":
    main_page()
else:
    detail_page(st.session_state.page)
